webpackJsonp([1],{"0cW+":function(e,t){},"2mV7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("gNcp"),s={};r.keys().forEach(function(e){"./index.js"!==e&&(s[e.replace(/(\.\/|\.js)/g,"")]=r(e).default)}),console.log(s),t.default=s},"2xwn":function(e,t){},"5C4X":function(e,t){},AeeJ:function(e,t){},Do5k:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Dd8w"),s=n.n(r),o={FLASH_THE_INFO:function(e,t){e.developerId=t.developerId,e.developerName=t.developerName,e.email=t.email,e.defaultProject=t.defaultProject,e.defaultFolder=t.defaultFolder,e.signed=t.signed,e.admin=t.admin,null===t.developerId?sessionStorage.removeItem("developerId"):sessionStorage.developerId=t.developerId}},a={setUserInfo:function(e,t){var n=e.commit;t&&n("FLASH_THE_INFO",s()({},t,{signed:!0}))},delUserInfo:function(e){(0,e.commit)("FLASH_THE_INFO",{developerId:null,developerName:null,email:null,defaultProject:null,defaultFolder:null,signed:!1,admin:!1})}};t.default={namespaced:!0,state:{developerId:null,developerName:null,email:null,defaultProject:null,defaultFolder:null,admin:!1,signed:!1},mutations:o,actions:a}},Ea63:function(e,t){},FqP9:function(e,t){},Jvnt:function(e,t){},MTuR:function(e,t){},Mas7:function(e,t){},NH2p:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),s=n("g4PW"),o=n.n(s),a=n("Dd8w"),i=n.n(a),l=n("mtWM"),c=n.n(l),u=n("//Fk"),d=n.n(u),p=n("zL8q"),f=n.n(p),m=n("NYxO"),v=n("2mV7");r.default.use(m.b);var h=new m.b.Store({modules:v.default,strict:!1}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{url:"",data:{},isSilence:!1,method:"GET"},t={method:e.method||"GET",url:e.url},n={};for(var r in e.data)e.data.hasOwnProperty(r)&&""!==e.data[r]&&(n[r]=e.data[r]);return t["GET"===t.method?"params":"data"]=n,new d.a(function(e,n){c.a.create({timeout:5e3})(t).then(function(t){e(t)}).catch(function(e){S(),n(e)})})},S=function(){if(h.state.UserInfo.signed){var e={methods:"GET",url:"/session/"+h.state.UserInfo.developerId};c.a.create({timeout:5e3})(e).then(function(e){h.dispatch("UserInfo/setUserInfo",e.data.data)}).catch(function(e){console.log(e),Object(p.Message)("登入信息已经过期了,访问非公开信息需要重新登陆哦"),h.dispatch("UserInfo/delUserInfo")})}},_=function(e,t){e.request?(p.Message.error("发送失败请检查网络连接╮（╯＿╰）╭"),t(e)):(Object(p.Message)("欸，好像出错了_(:з)∠)_，再试一次吧"),t(e))},b=function(e){return new d.a(function(t,n){if(e.response)switch(parseInt(e.response.status)){case 404:t(e);break;case 504:p.Message.error("发送失败请检查网络连接╮（╯＿╰）╭"),n(e);break;default:p.Message.warning(e.response.data.message+"(●ˇ∀ˇ●)"),n(e)}else _(e,n)})},E=function(e){if(e.response)switch(parseInt(e.response.status)){case 504:p.Message.error("发送失败请检查网络连接╮（╯＿╰）╭");break;default:p.Message.warning(e.response.data.message+"(●ˇ∀ˇ●)")}else _(e,function(){})},C={name:"App",data:function(){return{allow:!1}},computed:i()({},Object(m.d)("Setting",["baseUrl"])),methods:i()({},Object(m.c)("Setting",["setBaseUrl"]),Object(m.c)("UserInfo",["setUserInfo","delUserInfo"]),{fetchCurrentDeveloperInfo:function(){var e=this;if(sessionStorage.developerId){var t={methods:"GET",url:"/session/"+sessionStorage.developerId};g(t).then(function(t){e.setUserInfo(t.data.data),e.allow=!0}).catch(function(t){console.log(t),e.$message("登入信息已经过期了,访问非公开信息需要重新登陆哦"),e.delUserInfo(),e.allow=!0})}else this.allow=!0}}),created:function(){var e=o()("production","development")?"api":"/";console.log("store",this.baseUrl),this.baseUrl||null!==this.baseUrl||this.setBaseUrl(e),c.a.defaults.baseURL=this.baseUrl,console.log("baseUrl",e),console.log("store",this.baseUrl),console.log("axios.defaults.baseURL",c.a.defaults.baseURL),this.fetchCurrentDeveloperInfo(localStorage.developerId)}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return this.allow?t("div",{attrs:{id:"app"}},[t("router-view")],1):this._e()},staticRenderFns:[]};var y=n("VU/8")(C,N,!1,function(e){n("OAvX")},null,null).exports,j=(n("tvR6"),n("/ocq")),R={name:"register",props:["value"],data:function(){var e=this;return{registerForm:{developerName:"",email:"",confirmPass:"",developerPass:""},developerNameExist:!1,rules:{developerName:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:4,max:16,message:"长度在 4 到 16 个字符",pattern:/^[a-zA-Z_\-!@#0-9=]{4,16}$/,trigger:"blur"},{validator:function(t,n,r){""===n?r(new Error("请输入昵称")):e.developerNameExist?r(new Error("昵称已存在")):r()}}],developerPass:[{required:!0,message:"请输入密码",trigger:"blur"},{message:"长度在6到16个字符,只允许出现_-=!@#以及数字和字母",pattern:/^[a-zA-Z_\-!@#0-9=]{6,16}$/,trigger:"blur"},{validator:function(t,n,r){""===n?r(new Error("请输入密码")):(""!==e.registerForm.confirmPass&&e.$refs.register_form.validateField("confirmPass"),r())},trigger:"blur"}],confirmPass:[{required:!0,message:"请输入密码",trigger:"blur"},{message:"长度在6到16个字符,只允许出现_-=!@#以及数字和字母",pattern:/^[a-zA-Z_\-!@#0-9]{6,16}$/,trigger:"blur"},{validator:function(t,n,r){""===n?r(new Error("请再次输入密码")):n!==e.registerForm.developerPass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}]}}},methods:{developerRegister:function(){var e=this;this.$refs.register_form.validate(function(t){if(t){var n=p.Loading.service({lock:!0,text:"Loading",background:"rgba(255, 255, 255, 0.6)"}),r={method:"GET",url:"developers/developer-name/"+e.registerForm.developerName};g(r).then(function(t){e.developerNameExist=!0,e.$refs.register_form.validateField("developerName"),e.$message("当前用户名已存在(●ˇ∀ˇ●)"),n.close()}).catch(function(t){b(t).then(function(t){e.sendRegisterInfo()}),n.close()})}})},clearLogError:function(){this.developerNameExist=!1,this.$refs.register_form.validateField("developerName")},sendRegisterInfo:function(){var e=this,t={method:"POST",url:"developers",data:this.registerForm};return g(t).then(function(t){console.log(t),e.$message({type:"success",message:"注册成功[]~(￣▽￣)~*"}),e.$emit("input",!0)}).catch(function(e){E(e)})}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"register_form",attrs:{model:e.registerForm,"label-position":"top",rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{prop:"developerName"}},[n("el-input",{attrs:{placeholder:"昵称"},on:{focus:e.clearLogError},model:{value:e.registerForm.developerName,callback:function(t){e.$set(e.registerForm,"developerName",t)},expression:"registerForm.developerName"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"email"}},[n("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"developerPass"}},[n("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:e.registerForm.developerPass,callback:function(t){e.$set(e.registerForm,"developerPass",t)},expression:"registerForm.developerPass"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"confirmPass"}},[n("el-input",{attrs:{placeholder:"确认密码",type:"password"},model:{value:e.registerForm.confirmPass,callback:function(t){e.$set(e.registerForm,"confirmPass",t)},expression:"registerForm.confirmPass"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.developerRegister}},[e._v("注册")])],1)],1)],1)},staticRenderFns:[]};var w=n("VU/8")(R,P,!1,function(e){n("Mas7")},"data-v-248c00a6",null).exports,T=Object(m.a)("UserInfo"),q=T.mapState,F=T.mapActions,U={name:"register",props:["value"],data:function(){var e=this,t=function(t,n,r){e.loginPass?r():r(new Error("用户名或密码错误"))};return{loginform:{developerNameOrEmail:"",developerPass:"",remeberme:!1},loginPass:!0,rules:{developerNameOrEmail:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:1,max:16,message:"长度在 4 到 16 个字符",trigger:"blur"},{validator:t}],developerPass:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:t}]}}},methods:i()({developerLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){if(t){var n=p.Loading.service({lock:!0,text:"Loading",background:"rgba(255, 255, 255, 0.6)"}),r={method:"POST",url:"session",data:e.loginform};g(r).then(function(t){console.log(t),e.$message("登入成功o(￣▽￣)ｄ"),e.setUserInfo(t.data.data),e.$emit("login:success",e.developerId),n.close()}).catch(function(t){e.whenErrorMessage(t,function(){e.$message.warning("用户名或密码错误(●ˇ∀ˇ●)"),e.loginPass=!1,e.$refs.loginForm.validateField(["developerNameOrEmail","developerPass"])}),n.close()})}})},clearLogError:function(){this.loginPass=!0,this.$refs.loginForm.validateField(["developerNameOrEmail","developerPass"])},whenErrorMessage:function(e,t){e.response?404===e.response.status&&t():e.request?this.$message.error("发送失败请检查网络连接╮（╯＿╰）╭"):(console.log("Error",e.message),this.$message("欸，好像出错了_(:з)∠)_，再试一次吧"))}},F(["setUserInfo"])),computed:i()({},q(["developerId"]))},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"loginForm",attrs:{model:e.loginform,"label-position":"top",rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{prop:"developerNameOrEmail"}},[n("el-input",{attrs:{placeholder:"昵称或者邮件地址"},on:{focus:e.clearLogError},model:{value:e.loginform.developerNameOrEmail,callback:function(t){e.$set(e.loginform,"developerNameOrEmail",t)},expression:"loginform.developerNameOrEmail"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"developerPass"}},[n("el-input",{attrs:{placeholder:"密码",type:"password"},on:{focus:e.clearLogError},model:{value:e.loginform.developerPass,callback:function(t){e.$set(e.loginform,"developerPass",t)},expression:"loginform.developerPass"}})],1),e._v(" "),e._e(),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.developerLogin}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var O={name:"account-main",components:{DeveloperRegister:w,DeveloperSignIn:n("VU/8")(U,I,!1,function(e){n("kcrJ")},"data-v-2e01bbdb",null).exports},data:function(){return{readyLogin:!0}},methods:{changePanel:function(e){this.readyLogin="login"===e},loginSuccess:function(e){this.$emit("login:success",e)}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form_box"},[n("div",{staticClass:"from_head"},[n("div",{class:{active:e.readyLogin},on:{click:function(t){return e.changePanel("login")}}},[e._v("登入")]),e._v(" "),n("div",{class:{active:!e.readyLogin},on:{click:function(t){return e.changePanel("register")}}},[e._v("  注册")])]),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("keep-alive",[e.readyLogin?n("developer-sign-in",{staticClass:"input_box",on:{"login:success":function(t){return e.loginSuccess(t)}}}):n("developer-register",{staticClass:"input_box",model:{value:e.readyLogin,callback:function(t){e.readyLogin=t},expression:"readyLogin"}})],1)],1)],1)},staticRenderFns:[]};var x=n("VU/8")(O,k,!1,function(e){n("U7Wh")},"data-v-0e39f6dc",null).exports,D={name:"account-page",components:{AccountMain:x},methods:{loginSuccess:function(e){this.$router.push("/developers/"+e)}}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("account-main",{on:{"login:success":function(t){return e.loginSuccess(t)}}})],1)],1)},staticRenderFns:[]};var V=n("VU/8")(D,$,!1,function(e){n("lTfw")},"data-v-495a77c1",null).exports,H=Object(m.a)("UserInfo"),G=H.mapState,A=H.mapActions,L={name:"info-panel",components:{AccountMain:x},props:{message:{type:String,default:""}},data:function(){return{SignInVisible:!1}},methods:i()({},A(["delUserInfo"]),{logOut:function(){var e=this,t={method:"DELETE",url:"/session/"+this.developerId};g(t).then(function(t){e.$message("退出成功"),e.delUserInfo(),e.$router.push("/")}).catch(function(t){console.log(t),e.$message("退出失败")})},clickName:function(){this.$emit("click:name")}}),computed:i()({},G(["signed","developerName","developerId"]))},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.signed?n("div",{staticClass:"info-panel"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.message,placement:"top"}},[n("div",{staticClass:"name-info",staticStyle:{cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.clickName(t)}}},[e._v(e._s(e.developerName))])]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:e.logOut}},[e._v("\n      退出"),n("i",{staticClass:"el-icon-d-arrow-right"})])],1):n("div",{staticClass:"info-panel"},[n("el-button",{attrs:{type:"warning"},on:{click:function(t){t.stopPropagation(),e.SignInVisible=!0}}},[e._v("\n      登入"),n("i",{staticClass:"el-icon-back"})]),e._v(" "),n("el-dialog",{attrs:{"show-close":!1,width:"395px","custom-class":"loginPanel",visible:e.SignInVisible},on:{"update:visible":function(t){e.SignInVisible=t}}},[n("div",{staticClass:"loginPanel-body"}),e._v(" "),n("account-main",{on:{"login:success":function(t){return e.$emit("login:success")}}})],1)],1)])},staticRenderFns:[]};var z=n("VU/8")(L,M,!1,function(e){n("dKWq")},"data-v-4c2bcb9e",null).exports,Q=Object(m.a)("UserInfo").mapState,J={name:"document-panel-header",components:{InfoPanel:z},props:{inputTitle:{type:String,default:""},btn:{type:String,default:"default"}},data:function(){return{}},computed:i()({showButton:function(){return{default:{index:!0,develop:!1},index:{index:!1,develop:!0},developer:{index:!0,develop:!1},project:{index:!0,develop:!0},admin:{index:!0,develop:!0}}[this.btn]}},Q(["admin","developerId","signed"])),methods:{openUserInfoPanel:function(e){console.log("点击需要展示用户信息界面")},goTo:function(e){this.$router.push(e)}}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",gutter:20,justify:"space-around"}},[n("el-col",{attrs:{span:7}},[n("div",{staticClass:"doc-back"},[n("el-button-group",[e.showButton.index?n("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.goTo("/index")}}},[e._v("主页")]):e._e(),e._v(" "),e.showButton.develop&&e.signed?n("el-button",{attrs:{type:"info",size:"small",plain:"",icon:"el-icon-d-arrow-left"},on:{click:function(t){return t.stopPropagation(),e.goTo("/developers/"+e.developerId)}}},[e._v("个人")]):e._e(),e._v(" "),e.admin&&e.signed&&"admin"!==e.btn?n("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.goTo("/admin")}}},[e._v("管理员")]):e._e()],1)],1)]),e._v(" "),n("el-col",{attrs:{span:9}},[n("div",{staticClass:"doc-title"},[e._v(e._s(e.inputTitle))])]),e._v(" "),n("el-col",{attrs:{span:7}},[n("info-panel",{attrs:{message:"点击展示/修改用户信息"},on:{"click:name":e.openUserInfoPanel,"login:success":function(t){return e.$emit("login:success")}}})],1)],1)},staticRenderFns:[]};var W=n("VU/8")(J,B,!1,function(e){n("0cW+")},"data-v-2d930dcb",null).exports,Z=n("Zrlr"),X=n.n(Z),K=n("wxAW"),Y=n.n(K),ee=/^[\u4e00-\u9fa5a-zA-Z_\-0-9=]{1,8}$/,te=function(){function e(t){X()(this,e),this.pid=t.pid,this.projectName=t.projectName,this.projectOwner=t.projectOwner,this.overt=t.overt,this.whoJoins=t.whoJoins,this.ownerName=t.ownerName,this.status=t.status,console.log(this)}return Y()(e,[{key:"isLegalName",value:function(){return null!==this.projectName&&ee.test(this.projectName)}}],[{key:"convertToProject",value:function(t){return new e(JSON.parse(t))}},{key:"newEmptyProject",value:function(t){return new e({pid:null,projectName:null,projectOwner:null,overt:null,ownerName:null,whoJoins:null,status:null})}},{key:"adminFetch",value:function(e){return g({method:"GET",url:"/admin/projects",data:e})}},{key:"nameValid",value:function(){return{patten:ee,message:"文件夹名称长度在 1 到 8 个字符,且仅能出现字符'-_'"}}}]),e}(),ne=Object(m.a)("UserInfo").mapState,re={name:"modify-project",props:{value:{type:Boolean,default:!1},pid:{type:Number,default:null}},watch:{},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,project:te.newEmptyProject(),options:[],loading:!1,delDialogVisible:!1,rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:4,max:16,message:te.nameValid().message,pattern:te.nameValid().pattern,trigger:"blur"}]}}},computed:i()({dialogVisible:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},requestProject:function(){var e=null===this.pid?this.developerId:this.project.projectOwner;return new te({pid:this.project.pid,projectName:this.project.projectName,projectOwner:e,overt:this.project.overt,whoJoins:this.project.whoJoins.join(",")})},exhibit:function(){var e=null===this.pid,t=this.project.projectOwner===this.developerId||this.admin;return{title:e?"添加项目":"修改项目",allowModify:e||t,teammateMessage:t?"添加些小伙伴?":"以下的小伙伴加入了开发",delPanel:{type:t?"danger":"warning",icon:t?"el-icon-delete":"el-icon-back",message:t?"删除项目?":"离开项目?"},delUrl:(t?"":"developers/"+this.developerId+"/")+"projects/"+this.project.pid}}},ne(["developerId","admin"])),methods:{remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,g({method:"GET",url:"developers/developer-name-email-like/"+e}).then(function(e){t.options=e.data.data,t.loading=!1}).catch(function(e){b(e).then(function(e){t.$message.warning("没有含有此关键字的用户诶(●ˇ∀ˇ●)")})})):this.options=[]},checkCommit:function(){return!!this.requestProject.isLegalName()||(this.$message.warning(te.nameValid().message),!1)},delProject:function(){var e={request:{method:"DELETE",url:this.exhibit.delUrl},message:"[]~(￣▽￣)~*删除成功"};this.sendRequest(e)},commitProject:function(){if(this.checkCommit()){var e={method:"PUT",url:"projects/"+this.project.pid,data:this.requestProject},t={method:"POST",url:"developers/"+this.developerId+"/projects/",data:this.requestProject},n={request:null===this.pid?t:e,message:"[]~(￣▽￣)~*修改成功"};this.sendRequest(n)}},sendRequest:function(e){var t=this;g(e.request).then(function(n){t.$message.success(e.message),t.dialogVisible=!1,t.$emit("flash:projects")}).catch(function(e){b(e).then(function(e){t.$message.warning("没有对应的项目欸(●ˇ∀ˇ●)")})})},findCurrentUser:function(){var e=this,t={method:"GET",url:"projects/"+this.project.pid+"/whoJoins"};g(t).then(function(t){e.currentStatus=e.requestStatus.SUCCESS,e.dialogVisible=!0,e.options=t.data.data}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(){e.currentStatus=e.requestStatus.REQUEST_ERROR}),e.options=[]})},fetchTargetProject:function(e){var t=this;this.currentStatus=this.requestStatus.FETCHING,g({method:"GET",url:"/projects/"+e}).then(function(e){t.project=new te(e.data.data),t.project.whoJoins=t.project.whoJoins.split(",").map(function(e){return parseInt(e)}),t.findCurrentUser()}).catch(function(e){b(e).then(function(e){t.currentStatus=t.requestStatus.NOTFOUND}).catch(function(){t.currentStatus=t.requestStatus.REQUEST_ERROR}),t.dialogVisible=!1})}},created:function(){null!==this.pid&&this.fetchTargetProject(this.pid)}},se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.exhibit.title,visible:e.dialogVisible,width:"640px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}]},[n("el-form",{ref:"form",attrs:{"label-position":"top",model:e.project,rules:e.rules}},[n("el-form-item",{attrs:{prop:"projectName"}},[n("el-input",{attrs:{placeholder:"输入项目名称",disabled:!e.exhibit.allowModify},model:{value:e.project.projectName,callback:function(t){e.$set(e.project,"projectName",t)},expression:"project.projectName"}})],1),e._v(" "),n("el-form-item",[n("el-switch",{attrs:{disabled:!e.exhibit.allowModify},model:{value:e.project.overt,callback:function(t){e.$set(e.project,"overt",t)},expression:"project.overt"}}),e._v(" "),n("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[n("p",[e._v("公开的项目任何人都可以查看,但不能进行修改")]),e._v(" "),n("div",{staticStyle:{display:"inline-block"},attrs:{slot:"reference"},slot:"reference"},[e._v("公开?")])])],1)],1),e._v(" "),n("div"),e._v(" "),n("el-popover",{attrs:{placement:"top-start",title:"添加的小伙伴能干啥",width:"400",trigger:"hover"}},[n("p",[e._v("除了"),n("strong",[e._v("编辑项目")]),e._v("和"),n("strong",[e._v("删除项目")]),e._v("，\n      对项目内的"),n("strong",[e._v("文件夹")]),e._v("、"),n("strong",[e._v("接口")]),e._v("都将有操作的权限")]),e._v(" "),n("div",{staticStyle:{display:"inline-block"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.exhibit.teammateMessage))])]),e._v(" "),n("el-select",{staticClass:"teammate-choise",attrs:{disabled:!e.exhibit.allowModify,multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入小伙伴的昵称关键字或者Email信息","remote-method":e.remoteMethod,loading:e.loading},on:{click:function(e){e.stopPropagation()}},model:{value:e.project.whoJoins,callback:function(t){e.$set(e.project,"whoJoins",t)},expression:"project.whoJoins"}},e._l(e.options,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[null!==e.pid?n("el-button",{staticStyle:{float:"left"},attrs:{type:e.exhibit.delPanel.type,disabled:e.currentStatus===e.requestStatus.FETCHING,icon:e.exhibit.delPanel.icon},on:{click:function(t){e.delDialogVisible=!0}}}):e._e(),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.exhibit.allowModify?n("el-button",{attrs:{type:"primary",disabled:e.currentStatus===e.requestStatus.FETCHING},on:{click:e.commitProject}},[e._v("确 定")]):e._e()],1),e._v(" "),n("el-dialog",{attrs:{center:"",width:"210px",title:e.exhibit.delPanel.message,visible:e.delDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.delDialogVisible=t}}},[n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.delProject}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var oe=n("VU/8")(re,se,!1,function(e){n("sHQX")},"data-v-3490d1e0",null).exports,ae=Object(m.a)("UserInfo").mapState,ie={name:"project-panel",components:{ModifyProject:oe},props:{url:{type:String,default:null}},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,projects:null,filter:{page:0,size:9,total:0},focusPid:null,modifyVisible:!1}},computed:i()({},ae(["developerId"])),watch:{},methods:{modifyProject:function(e){this.focusPid=e,this.modifyVisible=!0},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.filter.size=e,this.filter.page=0,this.fetchDeveloperProject()},handleCurrentChange:function(e){console.log("当前页: "+e),this.filter.page=e-1,this.fetchDeveloperProject()},handleSelectionChange:function(e){this.currentSelect=e},fetchDeveloperProject:function(){var e=this;if(null!==this.url){this.currentStatus=this.requestStatus.FETCHING;var t={method:"GET",url:this.url,data:this.filter};g(t).then(function(t){console.log(t.data.data),e.filter.page=t.data.data.number,e.filter.size=t.data.data.size,e.filter.total=t.data.data.totalElements,e.projects=t.data.data.content.map(function(e){return new te(e)}),e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(t){console.log(t),e.currentStatus=e.requestStatus.REQUEST_ERROR})})}},browseProject:function(e){console.log("打开项目详情面板"+e),this.$router.push("/projects/"+e)}},created:function(){this.fetchDeveloperProject()},beforeRouteUpdate:function(e,t,n){n()}},le={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"developer-projects"},[e.currentStatus!==e.requestStatus.SUCCESS?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}],staticClass:"fetching_fail"},[e.currentStatus===e.requestStatus.NOTFOUND?n("div",{staticClass:"fetching_fail_not_found"},[e._v("\r\n      找不到了呢╮（╯＿╰）╭,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchDeveloperProject(t)}}},[e._v("创建")]),e._v("个项目吧\r\n    ")],1):e.currentStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\r\n      请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchDeveloperProject(t)}}},[e._v("再试试")]),e._v("吧\r\n    ")],1):e._e()]):n("div",{staticClass:"projects-warp"},[n("div",{staticClass:"project-container"},e._l(e.projects,function(t){return n("el-card",{key:t.pid,staticClass:"project-card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"card-container",on:{click:function(n){return n.stopPropagation(),e.browseProject(t.pid)}}},[e.developerId===t.projectOwner?n("i",{staticClass:"el-icon-setting",on:{click:function(n){return n.stopPropagation(),e.modifyProject(t.pid)}}}):e._e(),e._v(" "),n("div",{staticClass:"card-text"},[e._v(e._s(t.projectName))])])])}),1)]),e._v(" "),e.currentStatus===e.requestStatus.SUCCESS?n("div",{staticClass:"page-block"},[n("el-pagination",{attrs:{"current-page":e.filter.page+1,"page-sizes":[9,12,15],"page-size":e.filter.size,layout:"total, sizes, prev, pager, next, jumper",total:e.filter.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.modifyVisible?n("modify-project",{attrs:{pid:e.focusPid},on:{"flash:projects":e.fetchDeveloperProject},model:{value:e.modifyVisible,callback:function(t){e.modifyVisible=t},expression:"modifyVisible"}}):e._e()],1):e._e()])},staticRenderFns:[]};var ce={name:"main-page",components:{ProjectPanel:n("VU/8")(ie,le,!1,function(e){n("AeeJ")},"data-v-7d4704b4",null).exports,WaHeader:W},methods:{loginSuccess:function(){this.$refs.project_penal.fetchDeveloperProject()}}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",[t("wa-header",{attrs:{inputTitle:"公开的项目",btn:"index"},on:{"login:success":this.loginSuccess}})],1),this._v(" "),t("el-main",[t("project-panel",{ref:"project_penal",attrs:{url:"/projects/isOvert"}})],1)],1)},staticRenderFns:[]};var de=n("VU/8")(ce,ue,!1,function(e){n("cKLi")},"data-v-0093ffd7",null).exports,pe=/^[\u4e00-\u9fa5a-zA-Z_\-0-9=]{1,8}$/,fe=function(){function e(t){X()(this,e),this.fid=t.fid,this.folderName=t.folderName,this.parentId=t.parentId,this.folderOwnerId=t.folderOwnerId,this.belongProject=t.belongProject,this.status=t.status,console.log(this)}return Y()(e,[{key:"isLegalName",value:function(){return null!==this.folderName&&pe.test(this.folderName)}}],[{key:"convertToFolder",value:function(t){return new e(JSON.parse(t))}},{key:"newEmptyFolder",value:function(){return new e({fid:null,folderName:null,parentId:null,folderOwnerId:h.state.UserInfo.developerId?h.state.UserInfo.developerId:null,belongProject:null,status:null})}},{key:"nameValid",value:function(){return{patten:pe,message:"长度在 1 到 8 个字符,且仅能出现字符'-_'"}}}]),e}(),me=Object(m.a)("UserInfo").mapState,ve={name:"select-folder",props:{pid:{type:Number,default:null}},watch:{pid:function(){this.reflash()}},data:function(){return{nodeProps:{children:"children",label:"label",isLeaf:"leaf"},requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},obtionStatus:null,showTree:!0}},methods:{reflash:function(){var e=this;this.showTree=!1,setTimeout(function(){e.showTree=!0},1)},handleNodeClick:function(e){console.log(e),this.$emit("select:target",{id:e.contain,name:e.label})},loadFolders:function(e,t){if(0===e.level)this.fetchFirstLayer(e,t);else{var n={method:"GET",url:"projects/"+this.pid+"/folders/"+e.data.contain+"/sub_folders"};this.getFolders(e,t,n)}},getFolders:function(e,t,n){var r=this;g(n).then(function(e){t(e.data.data)}).catch(function(t){b(t).then(function(t){r.$message.warning("没有东西欸(●ˇ∀ˇ●)"),e.loading=!1}).catch(function(){e.loading=!1})})},fetchFirstLayer:function(e,t){var n=this;this.obtionStatus=this.requestStatus.FETCHING;var r={method:"GET",url:"projects/"+this.pid+"/folders/first_layer"};g(r).then(function(e){t(e.data.data),n.obtionStatus=n.requestStatus.SUCCESS}).catch(function(e){b(e).then(function(t){console.log(e.request),n.$message.warning("没有东西欸(●ˇ∀ˇ●)"),n.obtionStatus=n.requestStatus.NOTFOUND}).catch(function(){n.obtionStatus=n.requestStatus.REQUEST_ERROR})})}},computed:i()({treeClass:function(){return this.obtionStatus!==this.requestStatus.SUCCESS?"hidden select-folder-side-tree":"select-folder-side-tree"}},me(["developerId"])),created:function(){}},he={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return null!==e.pid?n("div",{staticClass:"aside"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.obtionStatus===e.requestStatus.FETCHING,expression:"obtionStatus === requestStatus.FETCHING"}],staticClass:"contant"},[e.obtionStatus!==e.requestStatus.SUCCESS?n("div",{staticClass:"contant_is_empty"},[e.obtionStatus===e.requestStatus.NOTFOUND?n("div",[e._v("\n        空空的诶(●ˇ∀ˇ●),还没有文件夹哦\n      ")]):e.obtionStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\n        请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.reflash(t)}}},[e._v("再试试")]),e._v("吧\n      ")],1):e._e()]):e._e(),e._v(" "),n("div",[e.showTree?n("el-tree",{ref:"project_tree",class:e.treeClass,attrs:{lazy:"","node-key":"nid",indent:5,load:e.loadFolders,props:e.nodeProps},on:{"node-click":e.handleNodeClick}}):e._e()],1)])]):e._e()},staticRenderFns:[]};var ge=n("VU/8")(ve,he,!1,function(e){n("RgbZ"),n("XFm5")},"data-v-37ddc068",null).exports,Se=Object(m.a)("UserInfo").mapState,_e={name:"select-location",components:{SelectFolder:ge},data:function(){return{show_modify:!1,projects:[],requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},obtionStatus:null,currentSelect:{project:{id:null,name:null},folder:{id:null,name:null}}}},methods:{findAllProjectByDeveloperId:function(){var e=this;if(null===this.developerId)return this.obtionStatus=this.requestStatus.REQUEST_ERROR,this.$message.warning("还没有登入欸(●ˇ∀ˇ●)"),null;var t={method:"GET",url:"developers/"+this.developerId+"/projects/"};this.obtionStatus=this.requestStatus.FETCHING,g(t).then(function(t){e.projects=t.data.data.map(function(e){return new te(e)}),e.obtionStatus=e.requestStatus.SUCCESS}).catch(function(t){e.whenErrorMessage(t,function(){e.$message.warning("还没有项目欸(●ˇ∀ˇ●)"),e.obtionStatus=e.requestStatus.NOTFOUND})})},whenErrorMessage:function(e,t){e.response?404===e.response.status&&t():e.request?(this.$message.error("发送失败请检查网络连接╮（╯＿╰）╭"),this.obtionStatus=this.requestStatus.REQUEST_ERROR):(this.$message("欸，好像出错了_(:з)∠)_，再试一次吧"),this.obtionStatus=this.requestStatus.REQUEST_ERROR)},choiceProject:function(e){this.currentSelect=e}},computed:i()({},Se(["developerId"])),watch:{currentSelect:{handler:function(e,t){this.$emit("select:target",e)},deep:!0}},created:function(){this.findAllProjectByDeveloperId()}},be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.obtionStatus===e.requestStatus.FETCHING,expression:"obtionStatus === requestStatus.FETCHING"}],staticClass:"select-location"},[n("div",{staticClass:"select-project"},e._l(e.projects,function(t){return n("dir",{key:t.pid,staticClass:"wa_project",style:t.pid===e.currentSelect.project.id?"background-color: #e4e4e4;":"",on:{click:function(n){n.stopPropagation(),e.currentSelect={project:{id:t.pid,name:t.projectName},folder:{id:null,name:null}}}}},[n("span",{staticClass:"project_title"},[e._v(e._s(t.projectName))]),e._v(" "),t.pid===e.currentSelect.pid?n("span",{staticClass:"edit"},[n("i",{staticClass:"el-icon-arrow-right"})]):e._e()])}),1),e._v(" "),n("div",{staticClass:"select-folder"},[n("select-folder",{ref:"select_folder",attrs:{pid:e.currentSelect.project.id,show_modify:!0},on:{"select:target":function(t){e.currentSelect.folder=t}}})],1)])},staticRenderFns:[]};var Ee=n("VU/8")(_e,be,!1,function(e){n("pmAw")},"data-v-01f16600",null).exports,Ce=Object(m.a)("UserInfo").mapState,Ne={name:"modify-folder",components:{SelectLocation:Ee},props:{value:{type:Boolean,default:!1},focus:{type:Object,default:function(){return null}}},data:function(){return{folder:fe.newEmptyFolder(),requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,delDialogVisible:!1,currentSelect:{pName:null,fName:null},rules:{folderName:[{required:!0,message:"请输入文件名",trigger:"blur"},{min:4,max:16,message:fe.nameValid().message,pattern:fe.nameValid().pattern,trigger:"blur"}]}}},computed:i()({dialogVisible:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},folderRequest:function(){if(null===this.focus){var e=this.folder.parentId?this.folder.parentId+"/sub_folders/":"";return{request:{method:"POST",url:"projects/"+this.folder.belongProject+"/folders/"+e,data:this.folder},message:"[]~(￣▽￣)~*添加成功"}}return{request:{method:"PUT",url:"projects/"+this.focus.pid+"/folders/"+this.focus.fid,data:this.folder},message:"[]~(￣▽￣)~*修改成功"}}},Ce(["developerId"])),methods:{currentChioceLocation:function(e){this.folder.belongProject=e.project.id,this.currentSelect.pName=e.project.name,this.folder.parentId=e.folder.id,this.currentSelect.fName=e.folder.name,console.log(e)},checkAllPass:function(){return null===this.folder.belongProject?(this.$message.warning("请选择所要放置的位置"),!1):(console.log("测试过了",this.folder),!!this.folder.isLegalName()||(this.$message.warning(fe.nameValid().message),!1))},delFolder:function(){this.sendRequest({request:{method:"DELETE",url:"projects/"+this.focus.pid+"/folders/"+this.focus.fid},message:"[]~(￣▽￣)~*删除成功"})},commitFolder:function(){this.checkAllPass()&&this.sendRequest(this.folderRequest)},sendRequest:function(e){var t=this;g(e.request).then(function(n){t.$message.success(e.message),t.dialogVisible=!1,t.$emit("flash:folders")}).catch(function(e){b(e).then(function(e){t.$message.warning("诶!对应文件夹不存在(●ˇ∀ˇ●)")})})},requestFolderInfo:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING;var t={method:"GET",url:"projects/"+this.focus.pid+"/folders/"+this.focus.fid};g(t).then(function(t){e.folder=new fe(t.data.data),e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){b(t).then(function(t){e.$message.warning("请求的文件夹不存在诶(●ˇ∀ˇ●)"),e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(){e.currentStatus=e.requestStatus.REQUEST_ERROR}),e.dialogVisible=!1})}},created:function(){null!==this.focus&&this.requestFolderInfo()}},ye={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:null===e.focus?"添加文件夹":"修改文件夹",visible:e.dialogVisible,width:"640px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}]},[n("el-form",{ref:"form",attrs:{model:e.folder,rules:e.rules}},[n("el-form-item",{attrs:{prop:"folderName"}},[n("el-input",{attrs:{placeholder:"文件夹名称"},model:{value:e.folder.folderName,callback:function(t){e.$set(e.folder,"folderName",t)},expression:"folder.folderName"}})],1)],1),e._v(" "),null===e.currentSelect.pName?n("div",[e._v("从下列选择所要放置的文件夹或项目")]):n("div",[e._v("当前选择的存放位置为: "),n("strong",[e._v(e._s(e.currentSelect.pName))]),e._v(" 项目下"),null!==e.currentSelect.fName?n("span",[e._v("的 "),n("strong",[e._v(e._s(e.currentSelect.fName?e.currentSelect.fName:""))]),e._v(" 文件夹")]):e._e()]),e._v(" "),e.dialogVisible?n("select-location",{on:{"select:target":function(t){return e.currentChioceLocation(t)}}}):e._e()],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[null!==e.focus?n("el-button",{staticStyle:{float:"left"},attrs:{type:"danger",disabled:e.currentStatus===e.requestStatus.FETCHING,icon:"el-icon-delete"},on:{click:function(t){e.delDialogVisible=!0}}}):e._e(),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{disabled:e.currentStatus===e.requestStatus.FETCHING,type:"primary"},on:{click:e.commitFolder}},[e._v("确 定")])],1),e._v(" "),n("el-dialog",{attrs:{center:"",width:"210px",title:"确定删除？",visible:e.delDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.delDialogVisible=t}}},[n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.delFolder}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var je=n("VU/8")(Ne,ye,!1,function(e){n("WDky")},"data-v-3e385f64",null).exports,Re=Object(m.a)("UserInfo").mapState,Pe={name:"document-side",components:{FolderInfoPanel:je},props:{pid:{type:Number},whoJoins:{type:String,default:null}},data:function(){return{nodeProps:{children:"children",label:"label",isLeaf:"leaf"},requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},obtionStatus:null,showTree:!0,focus:{pid:null,fid:null},modifyVisible:!1}},methods:{modifyFolder:function(e){this.modifyVisible=!0,this.focus=e},handleNodeClick:function(e){e.leaf&&this.$router.push("/projects/"+this.pid+"/apis/"+e.contain)},loadFolders:function(e,t){if(0===e.level)this.fetchFirstLayer(e,t);else{var n={method:"GET",url:"projects/"+this.pid+"/folders/"+e.data.contain+"/content"};this.getFolders(e,t,n)}},getFolders:function(e,t,n){var r=this;g(n).then(function(e){t(e.data.data)}).catch(function(t){b(t).then(function(t){r.$message.warning("没有东西欸(●ˇ∀ˇ●)"),e.loading=!1}).catch(function(){e.loading=!1})})},remove:function(e,t){var n=this,r=t.nid.split("-"),s={label:r[0],id:r[1]},o={method:"DELETE",url:"projects/"+this.project.pid+"/"+s.label+"s/"+t.contain};g(o).then(function(r){n.removeNode(e,t,s)}).catch(function(e){console.log(e),n.$message("删除失败了_(:з)∠)_，再试一次吧")})},removeNode:function(e,t,n){console.log("aid = "+n.id),"api"===n.label?this.$emit("del:api",n.id):"folder"===n.label&&(this.$emit("del:folder",n.id),console.log("folder id",n.id)),console.log(e,t);var r=e.parent.childNodes,s=r.findIndex(function(e){return e.key===t.nid});r.splice(s,1)},reflash:function(){var e=this;this.showTree=!1,setTimeout(function(){e.showTree=!0},1)},fetchFirstLayer:function(e,t){var n=this;this.obtionStatus=this.requestStatus.FETCHING;var r={method:"GET",url:"projects/"+this.pid+"/content/first_layer"};g(r).then(function(e){t(e.data.data),n.obtionStatus=n.requestStatus.SUCCESS}).catch(function(e){b(e).then(function(t){console.log(e.request),n.$message.warning("没有东西欸(●ˇ∀ˇ●)"),n.obtionStatus=n.requestStatus.NOTFOUND}).catch(function(){n.obtionStatus=n.requestStatus.REQUEST_ERROR})})}},computed:i()({treeClass:function(){return this.obtionStatus!==this.requestStatus.SUCCESS?"hidden":""},allowEdit:function(){var e=this,t=this.whoJoins.split(",").filter(function(t){return e.developerId===parseInt(t)});return console.log(t),console.log(this.whoJoins),t.length>0||this.admin}},Re(["developerId","signed","admin"])),created:function(){}},we={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"aside"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.obtionStatus===e.requestStatus.FETCHING,expression:"obtionStatus === requestStatus.FETCHING"}],staticClass:"contant"},[e.obtionStatus!==e.requestStatus.SUCCESS?n("div",{staticClass:"contant_is_empty"},[e.obtionStatus===e.requestStatus.NOTFOUND?n("div",[e._v("\n        空空的诶(●ˇ∀ˇ●)\n        "),e.allowEdit?n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.modifyFolder(null)}}},[e._v("创建一个文件夹?")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.$router.push("/index")}}},[e._v("去看看其他项目")])],1):e.obtionStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\n        请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.reflash(t)}}},[e._v("再试试")]),e._v("吧\n      ")],1):e._e()]):n("div",[e.allowEdit?n("el-button",{staticClass:"folder-add-btn",attrs:{size:"mini",icon:"el-icon-plus",type:"success",plain:""},on:{click:function(t){return t.stopPropagation(),e.modifyFolder(null)}}},[e._v("添加文件夹")]):e._e()],1),e._v(" "),n("div",[e.showTree?n("el-tree",{ref:"project_tree",class:e.treeClass,attrs:{lazy:"","node-key":"nid",indent:5,load:e.loadFolders,props:e.nodeProps},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,s=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(r.label))]),e._v(" "),e.signed?n("span",{staticClass:"folder-btn"},[!1===s.leaf&&e.allowEdit?n("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.modifyFolder({pid:s.belongProject,fid:s.contain})}},slot:"reference"},[e._v("修改")]):e._e()],1):e._e()])}}])}):e._e()],1)]),e._v(" "),n("div",{staticClass:"dividing_line"}),e._v(" "),e.modifyVisible?n("folder-info-panel",{attrs:{focus:e.focus},on:{"flash:folders":e.reflash},model:{value:e.modifyVisible,callback:function(t){e.modifyVisible=t},expression:"modifyVisible"}}):e._e()],1)},staticRenderFns:[]};var Te={name:"document-page",components:{DocumentSide:n("VU/8")(Pe,we,!1,function(e){n("bjrJ")},null,null).exports,WaHeader:W},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,currentPid:null,currentProject:null}},watch:{currentPid:function(e,t){this.fetchProject()}},computed:{headerTitle:function(){return null===this.currentProject?"":this.currentProject.projectName}},methods:{fetchProject:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING;var t={method:"GET",url:"projects/"+this.currentPid};g(t).then(function(t){e.currentProject=new te(t.data.data),e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){e.whenErrorMessage(t),e.currentProject=te.newEmptyProject()})},whenErrorMessage:function(e){e.response?(404===e.response.status?this.currentStatus=this.requestStatus.NOTFOUND:this.currentStatus=this.requestStatus.REQUEST_ERROR,this.$message.warning(e.response.data.message+"(●ˇ∀ˇ●)")):e.request?(this.$message.error("发送失败请检查网络连接╮（╯＿╰）╭"),this.currentStatus=this.requestStatus.REQUEST_ERROR):(this.$message("欸，好像出错了_(:з)∠)_，再试一次吧"),this.currentStatus=this.requestStatus.REQUEST_ERROR)},setCurrentPid:function(e){e&&!isNaN(e)?(this.currentPid=parseInt(e),console.log(this.currentPid)):(this.$message.warning("访问的地址错误(●ˇ∀ˇ●),自动回到之前的页面啦"),this.$router.go(-1))}},created:function(){this.setCurrentPid(this.$route.params.pid)},beforeRouteUpdate:function(e,t,n){this.setCurrentPid(e.params.pid),n()}},qe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("wa-header",{attrs:{inputTitle:e.headerTitle,btn:"project"},on:{"login:success":e.fetchProject}})],1),e._v(" "),e.currentStatus!==e.requestStatus.SUCCESS?n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}],staticClass:"api_container"},[n("div",{staticClass:"fetching_fail"},[e.currentStatus===e.requestStatus.NOTFOUND?n("div",{staticClass:"fetching_fail_not_found"},[e._v("\r\n        找不到了呢╮（╯＿╰）╭,点击右上角的主页或者个人中心，再选择个项目看看吧\r\n      ")]):e.currentStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\r\n        请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchProject(t)}}},[e._v("再试试")]),e._v("吧\r\n      ")],1):e._e()])]):n("el-container",{staticClass:"api_container"},[n("el-aside",[n("document-side",{attrs:{pid:e.currentProject.pid,whoJoins:e.currentProject.whoJoins,show_modify:!0}})],1),e._v(" "),n("el-main",[n("router-view")],1)],1)],1)},staticRenderFns:[]};var Fe=n("VU/8")(Te,qe,!1,function(e){n("wHOj")},"data-v-05e261cc",null).exports,Ue=function(){function e(t){X()(this,e),this.aid=t.aid,this.apiName=t.apiName,this.method=t.method,this.bewrite=t.bewrite,this.url=t.url,this.parameters=t.parameters,this.headers=t.headers,this.body=t.body,this.formData=t.formData,this.rawData=t.rawData,this.apiOwner=t.apiOwner,this.belongFolder=t.belongFolder,this.belongProject=t.belongProject,this.responseExample=t.responseExample,this.exampleParams=t.exampleParams,console.log(this)}return Y()(e,null,[{key:"convertToList",value:function(e,t){return null===e?[]:e.split("<a_o>").map(function(e){return t(e.split("<a_p>"))})}},{key:"convertToStr",value:function(e,t){return e?e.map(function(e){return t(e).join("<a_p>")}).join("<a_o>"):""}},{key:"convertToAPI",value:function(t){var n=e.newEmptyAPI();n.aid=t.aid,n.apiName=t.apiName,n.method=t.method?t.method:"GET",n.bewrite=t.bewrite?t.bewrite:"",n.url=t.url?t.url:"",n.parameters=t.parameters?this.convertToList(t.parameters,function(e){return{checked:"true"===e[0],key:e[1],value:e[2],description:e[3]}}):[],n.headers=t.headers?this.convertToList(t.headers,function(e){return{checked:"true"===e[0],key:e[1],value:e[2],description:e[3]}}):[];var r=t.body?JSON.parse(t.body):{currentChoice:{label:"none",value:""},formData:"",rawData:""};return n.body.formData=r.formData?this.convertToList(r.formData,function(e){return{checked:"true"===e[0],key:e[1],type:e[2],value:e[3],description:e[4]}}):[],n.body.rawData=r.rawData?r.rawData:"",n.body.currentChoice=r.currentChoice,n.apiOwner=t.apiOwner,n.belongFolder=t.belongFolder,n.belongProject=t.belongProject,n.responseExample=t.responseExample,n.exampleParams=this.convertToList(t.exampleParams,function(e){return{checked:"true"===e[0],key:e[1],type:e[2],description:e[3]}}),n}},{key:"newEmptyAPI",value:function(){return new e({aid:null,apiName:"",method:"",bewrite:"",url:"",parameters:[],headers:[],body:{currentChoice:{label:"none",value:""},formData:[],rawData:""},apiOwner:null,belongFolder:null,belongProject:null,responseExample:null,exampleParams:null})}}]),e}(),Ie={name:"modify-folder",components:{SelectLocation:Ee},props:{value:{type:Boolean,default:!1},focus:{type:Object,default:null}},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,delDialogVisible:!1,currentSelect:{pName:null,belongProject:null,fName:null,belongFolder:null}}},computed:{dialogVisible:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{currentChioceLocation:function(e){this.currentSelect.belongProject=e.project.id,this.currentSelect.pName=e.project.name,this.currentSelect.belongFolder=e.folder.id,this.currentSelect.fName=e.folder.name,console.log(e)},checkAllPass:function(){return null!==this.currentSelect.belongProject||(this.$message.warning("请选择所要移动到的位置"),!1)},moveAPI:function(){this.checkAllPass()&&this.sendRequest({request:{method:"PUT",url:"projects/"+this.focus.pid+"/apis/"+this.focus.aid+"/location",data:this.currentSelect},message:"[]~(￣▽￣)~*移动成功"})},sendRequest:function(e){var t=this;g(e.request).then(function(n){t.$message.success(e.message),t.dialogVisible=!1,t.$emit("flash:folders")}).catch(function(e){b(e).then(function(e){t.$message.warning("诶!这个API接口不存在(●ˇ∀ˇ●)")})})}},created:function(){console.log(this.focus)}},Oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"变更API存放位置",visible:e.dialogVisible,width:"640px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}]},[null===e.currentSelect.pName?n("div",[e._v("从下列选择所要放置的位置")]):n("div",[e._v("当前选择的存放位置为: "),n("strong",[e._v(e._s(e.currentSelect.pName))]),e._v(" 项目下"),null!==e.currentSelect.fName?n("span",[e._v("的 "),n("strong",[e._v(e._s(e.currentSelect.fName?e.currentSelect.fName:""))]),e._v(" 文件夹")]):e._e()]),e._v(" "),e.dialogVisible?n("select-location",{on:{"select:target":function(t){return e.currentChioceLocation(t)}}}):e._e()],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{disabled:e.currentStatus===e.requestStatus.FETCHING||null===e.currentSelect.pName,type:"primary"},on:{click:e.moveAPI}},[e._v("确 定")])],1)])},staticRenderFns:[]};var ke=n("VU/8")(Ie,Oe,!1,function(e){n("Jvnt")},"data-v-50c5a4e6",null).exports,xe=n("fZjL"),De=n.n(xe),$e={name:"json-response",props:{value:{type:String,default:null}},data:function(){return{colorType:{NORMAL:null,KEY:"#909399",NUMBER:"#67C23A",STRING:"#409EFF",BOOLEAN:"#E6A23C",NULL:"#F56C6C"}}},computed:{showResponse:function(){if(null===this.value)return"";try{return this.obj2HTML(0,null,JSON.parse(this.value))}catch(e){return""}}},methods:{obj2HTML:function(e,t,n){var r=this,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o={"[object Number]":function(n){return r.pStr(e,t,n,s,r.colorType.NUMBER)},"[object Array]":function(n){return r.pStr(e,t,"[")+n.map(function(t,s){return r.obj2HTML(e+1,null,t,s+1===n.length)}).join("")+r.pStr(e,null,"]",s)},"[object String]":function(n){return r.pStr(e,t,'"'+n+'"',s,r.colorType.STRING)},"[object Object]":function(n){var o=De()(n);return r.pStr(e,t,"{")+o.map(function(t,s){return r.obj2HTML(e+1,t,n[t],s+1===o.length)}).join("")+r.pStr(e,null,"}",s)},"[object Boolean]":function(n){return r.pStr(e,t,n,s,r.colorType.BOOLEAN)}};return null===n?this.pStr(e,t,n,s,this.colorType.NULL):o[Object.prototype.toString.call(n)](n)},pStr:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.colorType.NORMAL;return'<p style="text-indent:'+20*e+'px">'+(null===t?"":'<span style="color: '+this.colorType.KEY+';">"'+t+'"</span>: ')+(/\]|}/.test(n)?n:'<span style="color: '+s+';">'+n+"</span>")+(r?"":",")+"</p>"}}},Ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",{domProps:{innerHTML:this._s(this.showResponse)}})])},staticRenderFns:[]};var He={name:"api-page",components:{ApiLocationChange:ke,JsonResponse:n("VU/8")($e,Ve,!1,function(e){n("2xwn")},"data-v-6ffb8460",null).exports},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,modifyVisible:!1,delVisible:!1,testRequest:Ue.newEmptyAPI(),currentAid:null,currentPid:null}},watch:{currentAid:function(e,t){this.fetchApiInfo()}},methods:{delApi:function(){var e=this,t={method:"DELETE",url:"projects/"+this.currentPid+"/apis/"+this.currentAid};g(t).then(function(t){e.delVisible=!1,e.$message("[]~(￣▽￣)~*删除成功"),e.$router.go(0)}).catch(function(e){E(e)})},fetchApiInfo:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING;var t={method:"GET",url:"projects/"+this.currentPid+"/apis/"+this.currentAid},n=this.$createElement;g(t).then(function(t){e.currentStatus=e.requestStatus.SUCCESS,e.testRequest=Ue.convertToAPI(t.data.data)}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND,e.$notify({title:"获取相应的API信息",message:n("i",{style:"color: #f56c6c"},"〒▽〒找不到相应的API信息了")})}).catch(function(){e.$notify({title:"获取相应的API信息",message:n("i",{style:"color: #f56c6c"},"请求失败了〒▽〒,页面上的信息可能已经失效")}),e.currentStatus=e.requestStatus.REQUEST_ERROR}),e.testRequest=Ue.newEmptyAPI()})},checkRouteValue:function(e){return console.log("key"+e),(null===e||void 0===e||isNaN(e))&&(this.$message.warning("访问的地址错误(●ˇ∀ˇ●),自动回到之前的页面啦"),this.$router.go(-1)),parseInt(e)}},created:function(){this.currentPid=this.checkRouteValue(this.$route.params.pid),this.currentAid=this.checkRouteValue(this.$route.params.aid)},activated:function(){console.log("dddd")},beforeRouteUpdate:function(e,t,n){this.currentPid=this.checkRouteValue(e.params.pid),this.currentAid=this.checkRouteValue(e.params.aid),console.log(this.currentAid),n()},beforeRouteEnter:function(e,t,n){console.log("cccc"),n()}},Ge={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus==e.requestStatus.FETCHING,expression:"currentStatus == requestStatus.FETCHING"}],staticClass:"api_contant"},[e.currentStatus!==e.requestStatus.SUCCESS?n("div",{staticClass:"fetching_fail"},[e._v("\n    点击左侧选择新的API"),null!==e.currentAid?n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchApiInfo()}}},[e._v(",或者刷新")]):e._e(),e._v("试试\n  ")],1):n("div",{staticClass:"doc-api"},[n("div",{staticClass:"doc-api-header"},[n("span",[e._v(e._s(e.testRequest.method))]),e._v("\n      "+e._s(e.testRequest.apiName)+"\n      "),n("div",{staticStyle:{float:"right"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[n("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(t){t.stopPropagation(),e.delVisible=!0}}})],1),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改存放位置",placement:"top"}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-rank",circle:"",plain:""},on:{click:function(t){t.stopPropagation(),e.modifyVisible=!0}}})],1),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刷新",placement:"top"}},[n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-refresh",circle:"",plain:""},on:{click:function(t){return t.stopPropagation(),e.fetchApiInfo()}}})],1)],1)]),e._v(" "),n("div",{staticClass:"doc-api-title"},[e._v("\n      API的描述信息\n    ")]),e._v(" "),n("p",{staticClass:"doc-api-text"},[e._v("\n      "+e._s(""===e.testRequest.bewrite?"无":e.testRequest.bewrite)+"\n    ")]),e._v(" "),n("div",{staticClass:"doc-api-title"},[e._v("\n      请求的URL\n    ")]),e._v(" "),n("p",{staticClass:"doc-api-text"},[e._v("\n      "+e._s(e.testRequest.url)+"\n    ")]),e._v(" "),n("div",{staticClass:"doc-api-title"},[e._v("\n      请求的方式\n    ")]),e._v(" "),n("p",{staticClass:"doc-api-text"},[e._v("\n      "+e._s(e.testRequest.method)+"\n    ")]),e._v(" "),e.testRequest.headers.length>1?n("div",{staticClass:"doc-api-title"},[e._v("\n      请求头\n    ")]):e._e(),e._v(" "),e.testRequest.headers.length>1?n("div",{staticClass:"doc-api-table"},[n("el-table",{attrs:{data:e.testRequest.headers,stripe:""}},[n("el-table-column",{attrs:{align:"center",prop:"key",label:"键"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"value",label:"值"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}})],1)],1):e._e(),e._v(" "),e.testRequest.parameters.length>1?n("div",{staticClass:"doc-api-title"},[e._v("\n      请求的查询参数\n    ")]):e._e(),e._v(" "),e.testRequest.parameters.length>1?n("div",{staticClass:"doc-api-table"},[n("el-table",{attrs:{data:e.testRequest.parameters,stripe:""}},[n("el-table-column",{attrs:{align:"center",prop:"key",label:"键"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"value",label:"值"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}})],1)],1):e._e(),e._v(" "),"none"!==e.testRequest.body.currentChoice.label.toLowerCase()?n("div",{staticClass:"doc-api-title"},[e._v("\n      请求体 ("+e._s(e.testRequest.body.currentChoice.label.toLowerCase())+")"+e._s(e.testRequest.body.currentChoice.value)+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"doc-api-table"},["raw"===e.testRequest.body.currentChoice.label?n("div",["application/json"===e.testRequest.body.currentChoice.value?n("div",{staticClass:"doc-api-text"},[n("json-response",{model:{value:e.testRequest.body.rawData,callback:function(t){e.$set(e.testRequest.body,"rawData",t)},expression:"testRequest.body.rawData"}})],1):n("p",{staticClass:"doc-api-text"},[e._v("\n          "+e._s(e.testRequest.body.rawData)+"\n        ")])]):"formData"===e.testRequest.body.currentChoice.label?n("el-table",{attrs:{data:e.testRequest.body.formData,stripe:""}},[n("el-table-column",{attrs:{align:"center",prop:"key",label:"键"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"value",label:"值"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"type",label:"类型"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}})],1):e._e()],1),e._v(" "),null!==e.testRequest.responseExample?n("div",{staticClass:"doc-api-title"},[e._v("\n      请求响应\n    ")]):e._e(),e._v(" "),null!==e.testRequest.responseExample?n("el-input",{attrs:{type:"textarea",rows:15,resize:"none",readonly:""},model:{value:e.testRequest.responseExample,callback:function(t){e.$set(e.testRequest,"responseExample",t)},expression:"testRequest.responseExample"}}):e._e(),e._v(" "),e.testRequest.exampleParams.length>1?n("div",{staticClass:"doc-api-title"},[e._v("\n      响应参数说明\n    ")]):e._e(),e._v(" "),e.testRequest.exampleParams.length>1?n("div",{staticClass:"doc-api-table"},[n("el-table",{attrs:{data:e.testRequest.exampleParams,stripe:""}},[n("el-table-column",{attrs:{align:"center",prop:"key",label:"键"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"type",label:"类型"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}})],1)],1):e._e()],1),e._v(" "),e.modifyVisible?n("api-location-change",{attrs:{focus:{aid:e.currentAid,pid:e.currentPid}},on:{"flash:folders":function(t){return e.$router.go(0)}},model:{value:e.modifyVisible,callback:function(t){e.modifyVisible=t},expression:"modifyVisible"}}):e._e(),e._v(" "),n("el-dialog",{attrs:{center:"",width:"210px",title:"确定删除？",visible:e.delVisible},on:{"update:visible":function(t){e.delVisible=t}}},[n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.delApi}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Ae=n("VU/8")(He,Ge,!1,function(e){n("Ea63")},"data-v-1c93f817",null).exports,Le={name:"project-panel",components:{ModifyProject:oe},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,projects:null,currentSelect:null,modifyVisible:!1,focusPid:null,filter:{page:0,size:10,total:0}}},methods:{editProject:function(e){this.focusPid=e,this.modifyVisible=!0},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.filter.size=e,this.filter.page=0,this.fetchProject()},handleCurrentChange:function(e){console.log("当前页: "+e),this.filter.page=e-1,this.fetchProject()},handleSelectionChange:function(e){this.currentSelect=e},fetchProject:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING,te.adminFetch(this.filter).then(function(t){e.filter.page=t.data.data.number,e.filter.size=t.data.data.size,e.filter.total=t.data.data.totalElements,e.projects=t.data.data.content.map(function(e){return new te(e)}),e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(){e.currentStatus=e.requestStatus.REQUEST_ERROR})})}},created:function(){this.fetchProject()}},Me={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.currentStatus!==e.requestStatus.SUCCESS?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}],staticClass:"fetching_fail"},[e.currentStatus===e.requestStatus.NOTFOUND?n("div",{staticClass:"fetching_fail_not_found"},[e._v("\r\n      找不到了呢╮（╯＿╰）╭,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchProject(t)}}},[e._v("创建")]),e._v("个项目吧\r\n    ")],1):e.currentStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\r\n      请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchProject(t)}}},[e._v("再试试")]),e._v("吧\r\n    ")],1):e._e()]):n("div",[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.projects,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"pid",label:"项目ID"}}),e._v(" "),n("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ownerName",label:"属于"}}),e._v(" "),n("el-table-column",{attrs:{label:"是否公开"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.overt?"primary":"success","disable-transitions":""}},[e._v(e._s(!0===t.row.overt?"公开":"私有"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.editProject(t.row.pid)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return e.$router.push("/projects/"+t.row.pid)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.filter.page+1,"page-sizes":[10,20,30],"page-size":e.filter.size,layout:"total, sizes, prev, pager, next, jumper",total:e.filter.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.modifyVisible?n("modify-project",{attrs:{pid:e.focusPid},on:{"flash:projects":e.fetchProject},model:{value:e.modifyVisible,callback:function(t){e.modifyVisible=t},expression:"modifyVisible"}}):e._e()],1)},staticRenderFns:[]};var ze=n("VU/8")(Le,Me,!1,function(e){n("cD4B")},"data-v-349f35be",null).exports,Qe=function(){function e(t){X()(this,e),this.developerId=t.developerId,this.developerName=t.developerName,this.developerPass=t.developerPass,this.email=t.email,this.salt=t.salt,this.admin=t.admin,this.defaultFolder=t.defaultFolder,this.defaultProject=t.defaultProject,console.log(this)}return Y()(e,null,[{key:"convertToDeveloper",value:function(t){return new e(JSON.parse(t))}},{key:"newEmptyDeveloper",value:function(t){return new e({developerId:null,developerName:null,developerPass:null,email:null,salt:null,admin:null,defaultFolder:null,defaultProject:null})}},{key:"adminFetch",value:function(e){return g({method:"GET",url:"/admin/developers",data:e})}}]),e}(),Je={name:"modify-developer",props:{value:{type:Boolean,default:!1},focus:{type:Number,default:null}},computed:{dialogVisible:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},requestDeveloper:function(){return{status:this.developer.status,admin:this.developer.admin,developerPass:this.developer.developerPass,email:this.developer.email}}},data:function(){return{developer:{developerName:"",email:"",admin:"",confirmPass:"",developerPass:"",status:""},developerNameExist:!1,requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,delDialogVisible:!1,rules:{developerPass:[{message:"长度在6到16个字符,只允许出现_-=!@#以及数字和字母",pattern:/^[a-zA-Z_\-!@#0-9=]{6,16}$|^$/,trigger:"blur"}],email:[{type:"email",required:!0,message:"邮箱格式不正确",trigger:"blur"}]}}},methods:{changevalue:function(){console.log(this.developer)},commitDeveloper:function(){var e=this;this.$refs.register_form.validate(function(t){if(t){var n={method:"PUT",url:"/admin/developers/"+e.focus,data:e.requestDeveloper};console.log(n),g(n).then(function(t){e.currentStatus=e.requestStatus.SUCCESS,e.dialogVisible=!1,e.$emit("flash:developers")}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(){e.currentStatus=e.requestStatus.REQUEST_ERROR})})}})},fetchDeveloper:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING;var t={methods:"GET",url:"/admin/developers/"+this.focus};g(t).then(function(t){e.developer=t.data.data,e.developer.developerPass="",e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){b(t).then(function(t){e.$message("没有找到你想要的用户(●ˇ∀ˇ●)"),e.dialogVisible=!1,e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(){e.dialogVisible=!1,e.currentStatus=e.requestStatus.NOTFOUND})})}},created:function(){null!==this.focus?this.fetchDeveloper():(this.dialogVisible=!1,this.$message("欸，好像出错了_(:з)∠)_，再试一次吧"))}},Be={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"修改开发者",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}]},[n("el-form",{ref:"register_form",attrs:{model:e.developer,rules:e.rules}},[n("el-form-item",{attrs:{prop:"developerName"}},[n("el-input",{attrs:{disabled:!0,placeholder:"昵称"},model:{value:e.developer.developerName,callback:function(t){e.$set(e.developer,"developerName",t)},expression:"developer.developerName"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"email"}},[n("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.developer.email,callback:function(t){e.$set(e.developer,"email",t)},expression:"developer.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"管理员",prop:"admin"}},[n("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.developer.admin,callback:function(t){e.$set(e.developer,"admin",t)},expression:"developer.admin"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"status"}},[n("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用","active-value":1,"inactive-value":-1},on:{change:e.changevalue},model:{value:e.developer.status,callback:function(t){e.$set(e.developer,"status",t)},expression:"developer.status"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"developerPass"}},[n("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:e.developer.developerPass,callback:function(t){e.$set(e.developer,"developerPass",t)},expression:"developer.developerPass"}})],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{disabled:e.currentStatus===e.requestStatus.FETCHING,type:"primary"},on:{click:e.commitDeveloper}},[e._v("确 定")])],1)])},staticRenderFns:[]};var We={name:"developer-panel",components:{ModifyDeveloper:n("VU/8")(Je,Be,!1,function(e){n("5C4X")},"data-v-f3625e8a",null).exports},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,developers:null,focusDid:null,openCreate:!1,currentSelect:null,filter:{page:0,size:10,total:0}}},methods:{modifyDeveloper:function(e){this.focusDid=e,console.log(e),this.openCreate=!0},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.filter.size=e,this.filter.page=0,this.fetchDevelopers()},handleCurrentChange:function(e){console.log("当前页: "+e),this.filter.page=e-1,this.fetchDevelopers()},handleSelectionChange:function(e){this.currentSelect=e},fetchDevelopers:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING,Qe.adminFetch(this.filter).then(function(t){e.filter.page=t.data.data.number,e.filter.size=t.data.data.size,e.filter.total=t.data.data.totalElements,e.developers=t.data.data.content.map(function(e){return new Qe(e)}),e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(){e.currentStatus=e.requestStatus.REQUEST_ERROR})})}},created:function(){this.fetchDevelopers()},activated:function(){console.log("developer Panel")}},Ze={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.currentStatus!==e.requestStatus.SUCCESS?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}],staticClass:"fetching_fail"},[e.currentStatus===e.requestStatus.NOTFOUND?n("div",{staticClass:"fetching_fail_not_found"},[e._v("\r\n      找不到了呢╮（╯＿╰）╭,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchDevelopers(t)}}},[e._v("创建")]),e._v("个项目吧\r\n    ")],1):e.currentStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\r\n      请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchDevelopers(t)}}},[e._v("再试试")]),e._v("吧\r\n    ")],1):e._e()]):n("div",[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.developers,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"developerId",label:"ID"}}),e._v(" "),n("el-table-column",{attrs:{prop:"developerName",label:"开发者名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),n("el-table-column",{attrs:{label:"是否是管理员"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:t.row.admin?"success":"primary","disable-transitions":""}},[e._v(e._s(!0===t.row.admin?"是":"否"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.modifyDeveloper(t.row.developerId)}}},[e._v("编辑")])]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.filter.page+1,"page-sizes":[10,20,30],"page-size":e.filter.size,layout:"total, sizes, prev, pager, next, jumper",total:e.filter.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.openCreate?n("modify-developer",{attrs:{focus:e.focusDid},on:{"flash:developers":e.fetchDevelopers},model:{value:e.openCreate,callback:function(t){e.openCreate=t},expression:"openCreate"}}):e._e()],1)},staticRenderFns:[]};var Xe=n("VU/8")(We,Ze,!1,function(e){n("FqP9")},"data-v-599fdc9a",null).exports,Ke=Object(m.a)("UserInfo").mapState,Ye={name:"admin-page",components:{ProjectPanel:ze,WaHeader:W,DeveloperPanel:Xe},data:function(){return{activeName:"projects"}},computed:i()({},Ke(["signed"]))},et={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("wa-header",{attrs:{inputTitle:"管理页面",btn:"admin"}})],1),e._v(" "),n("el-main",[e.signed?n("div",[[n("el-tabs",{attrs:{stretch:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"项目管理",name:"projects"}},["projects"===e.activeName?n("project-panel"):e._e()],1),e._v(" "),n("el-tab-pane",{attrs:{label:"开发者管理",name:"developers"}},["developers"===e.activeName?n("developer-panel"):e._e()],1)],1)]],2):e._e()])],1)},staticRenderFns:[]};var tt=n("VU/8")(Ye,et,!1,function(e){n("MTuR")},"data-v-1ee08f10",null).exports,nt=Object(m.a)("UserInfo").mapState,rt={name:"user-project-page",components:{WaHeader:W,ModifyProject:oe},data:function(){return{requestStatus:{SUCCESS:1,NOTFOUND:2,REQUEST_ERROR:3,FETCHING:4},currentStatus:null,currentDid:null,projects:null,modifyVisible:!1,focusPid:null}},computed:i()({},nt(["developerId","admin","signed"]),{isOvert:function(){return this.admin||this.developerId===this.currentDid?"":"/overt"}}),watch:{currentDid:function(e,t){this.fetchDeveloperProject()}},methods:{fetchDeveloperProject:function(){var e=this;this.currentStatus=this.requestStatus.FETCHING,console.log("is Overt ",this.admin,this.developerId,this.currentDid,this.isOvert);var t={method:"GET",url:"developers/"+this.currentDid+"/projects"+this.isOvert};g(t).then(function(t){console.log(t.data.data),e.projects=t.data.data,e.currentStatus=e.requestStatus.SUCCESS}).catch(function(t){b(t).then(function(t){e.currentStatus=e.requestStatus.NOTFOUND}).catch(function(t){console.log(t),e.currentStatus=e.requestStatus.REQUEST_ERROR})})},browseProject:function(e){console.log("打开项目详情面板"+e),this.$router.push("/projects/"+e)},modifyProject:function(e){this.focusPid=e,this.modifyVisible=!0},setCurrentDid:function(e){e&&!isNaN(e)?(this.currentDid=parseInt(e),console.log(this.currentDid)):this.$message.warning("访问的地址错误(●ˇ∀ˇ●),自动回到之前的页面啦")}},created:function(){this.setCurrentDid(this.$route.params.did)},beforeRouteUpdate:function(e,t,n){this.setCurrentDid(e.params.did),n()}},st={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("wa-header",{attrs:{btn:"developer"},on:{"login:success":e.fetchDeveloperProject}})],1),e._v(" "),n("el-main",[e.currentStatus!==e.requestStatus.SUCCESS?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.currentStatus===e.requestStatus.FETCHING,expression:"currentStatus === requestStatus.FETCHING"}],staticClass:"fetching_fail"},[e.currentStatus===e.requestStatus.NOTFOUND?n("div",{staticClass:"fetching_fail_not_found"},[e._v("\r\n        找不到了呢╮（╯＿╰）╭,\r\n        "),e.developerId===e.currentDid?n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.modifyProject(null)}}},[e._v("创建一个")]):n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.$router.push("/index")}}},[e._v("去主页看看")]),e._v("\r\n        吧\r\n      ")],1):e.currentStatus===e.requestStatus.REQUEST_ERROR?n("div",[e._v("\r\n        请求失败了_(:з)∠)_,"),n("el-button",{attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.fetchDeveloperProject(t)}}},[e._v("再试试")]),e._v("吧\r\n      ")],1):e._e()]):n("div",{staticClass:"projects-warp"},[n("div",{staticClass:"project-container"},[e.developerId===e.currentDid?n("el-card",{staticClass:"project-card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"card-container",on:{click:function(t){return t.stopPropagation(),e.modifyProject(null)}}},[n("div",{staticClass:"add-project-i"},[n("i",{staticClass:"el-icon-plus"})])])]):e._e(),e._v(" "),e._l(e.projects,function(t){return n("el-card",{key:t.pid,staticClass:"project-card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"card-container",on:{click:function(n){return n.stopPropagation(),e.browseProject(t.pid)}}},[e.signed?n("i",{staticClass:"el-icon-setting",on:{click:function(n){return n.stopPropagation(),e.modifyProject(t.pid)}}}):e._e(),e._v(" "),n("div",{staticClass:"card-text"},[e._v(e._s(t.projectName))])])])})],2)])]),e._v(" "),e.modifyVisible?n("modify-project",{attrs:{pid:e.focusPid},on:{"flash:projects":e.fetchDeveloperProject},model:{value:e.modifyVisible,callback:function(t){e.modifyVisible=t},expression:"modifyVisible"}}):e._e()],1)},staticRenderFns:[]};var ot=n("VU/8")(rt,st,!1,function(e){n("NH2p")},"data-v-0a836257",null).exports;r.default.use(j.a);var at=new j.a({routes:[{path:"/",name:"account-page",component:V},{path:"/index",name:"index-page",component:de},{path:"/developers/:did",name:"user-project-page",component:ot},{path:"/projects/:pid",name:"document-page",component:Fe,children:[{path:"apis/:aid",name:"api-page",component:Ae}]},{path:"/admin",name:"admin-page",component:tt}]});r.default.use(m.b),r.default.config.productionTip=!1,r.default.use(f.a),new r.default({el:"#app",router:at,store:h,components:{App:y},template:"<App/>",render:function(e){return e(y)}})},OAvX:function(e,t){},RgbZ:function(e,t){},U7Wh:function(e,t){},WDky:function(e,t){},XFm5:function(e,t){},bjrJ:function(e,t){},cD4B:function(e,t){},cKLi:function(e,t){},dKWq:function(e,t){},eBgY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={namespaced:!0,state:{main:0},mutations:{DECREMENT_MAIN_COUNTER:function(e){e.main--},INCREMENT_MAIN_COUNTER:function(e){e.main++}},actions:{someAsyncTask:function(e){(0,e.commit)("INCREMENT_MAIN_COUNTER")}}}},gNcp:function(e,t,n){var r={"./Counter.js":"eBgY","./EntitysContainer.js":"sAGI","./Setting.js":"jxhv","./UserInfo.js":"Do5k","./index.js":"2mV7"};function s(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(r)},s.resolve=o,e.exports=s,s.id="gNcp"},jxhv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mtWM"),s=n.n(r),o={SET_BASE_URL:function(e,t){e.baseUrl=t,s.a.defaults.baseURL=t}};t.default={namespaced:!0,state:{baseUrl:null},mutations:o,actions:{setBaseUrl:function(e,t){var n=e.commit;t&&""!==t&&n("SET_BASE_URL",t)}}}},kcrJ:function(e,t){},lTfw:function(e,t){},pmAw:function(e,t){},sAGI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={setProjects:function(e,t){var n=e.commit;t&&t instanceof Array&&n("FLASH_THE_PROJECTS",t)},setTreeNodes:function(e,t){var n=e.commit;t&&t instanceof Array&&n("FLASH_THE_NODES",t)}};t.default={namespaced:!0,state:{projects:[],treeNodes:[]},mutations:{FLASH_THE_PROJECTS:function(e,t){e.projects=t},FLASH_THE_NODES:function(e,t){e.treeNodes=t}},actions:r}},sHQX:function(e,t){},tvR6:function(e,t){},wHOj:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5bcd2e5ee336b16cba89.js.map